{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the App Navigator application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "username": {
          "type": "string",
          "description": "The username of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "username",
        "email"
      ]
    },
    "Community": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Community",
      "type": "object",
      "description": "Represents a user-created community.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the community."
        },
        "description": {
          "type": "string",
          "description": "A short description of the community."
        },
        "creatorId": {
          "type": "string",
          "description": "The UID of the user who created the community."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the community was created."
        }
      },
      "required": [
        "name",
        "creatorId",
        "createdAt"
      ]
    },
    "Post": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Post",
      "type": "object",
      "description": "Represents a post within a community.",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the post."
        },
        "content": {
          "type": "string",
          "description": "The content of the post."
        },
        "creatorId": {
          "type": "string",
          "description": "The UID of the user who created the post."
        },
        "creatorDisplayName": {
          "type": "string",
          "description": "The display name of the user who created the post."
        },
        "creatorPhotoURL": {
          "type": "string",
          "format": "uri",
          "description": "The photo URL of the user who created the post."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the post was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the post was last updated."
        },
        "upvotes": {
          "type": "number",
          "description": "The number of upvotes the post has received."
        },
        "downvotes": {
          "type": "number",
          "description": "The number of downvotes the post has received."
        },
        "voteCount": {
          "type": "number",
          "description": "The total score of the post (upvotes - downvotes)."
        }
      },
      "required": [
        "title",
        "content",
        "creatorId",
        "creatorDisplayName",
        "createdAt",
        "upvotes",
        "downvotes",
        "voteCount"
      ]
    },
    "Comment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Comment",
      "type": "object",
      "description": "Represents a comment on a post.",
      "properties": {
        "content": {
          "type": "string",
          "description": "The content of the comment."
        },
        "creatorId": {
          "type": "string",
          "description": "The UID of the user who created the comment."
        },
        "creatorDisplayName": {
          "type": "string",
          "description": "The display name of the user who created the comment."
        },
        "creatorPhotoURL": {
          "type": "string",
          "format": "uri",
          "description": "The photo URL of the user who created the comment."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the comment was created."
        },
        "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the comment was last updated."
        },
        "upvotes": {
            "type": "number",
            "description": "The number of upvotes the comment has received."
        },
        "downvotes": {
            "type": "number",
            "description": "The number of downvotes the comment has received."
        },
        "voteCount": {
            "type": "number",
            "description": "The total score of the comment (upvotes - downvotes)."
        }
      },
      "required": [
        "content",
        "creatorId",
        "creatorDisplayName",
        "createdAt",
        "upvotes",
        "downvotes",
        "voteCount"
      ]
    },
    "Vote": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Vote",
      "type": "object",
      "description": "Represents a user's vote on a post or comment.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the user who voted."
        },
        "value": {
          "type": "number",
          "description": "The value of the vote: 1 for upvote, -1 for downvote."
        }
      },
      "required": [
        "userId",
        "value"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user data. Path-based ownership ensures only the authenticated user (userId) can access their own data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Authentication UID."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}",
        "definition": {
          "entityName": "Community",
          "schema": {
            "$ref": "#/backend/entities/Community"
          },
          "description": "Stores community data. Any authenticated user can create and view communities.",
          "params": [
            {
              "name": "communityId",
              "description": "The unique identifier of the community."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/posts/{postId}",
        "definition": {
          "entityName": "Post",
          "schema": {
            "$ref": "#/backend/entities/Post"
          },
          "description": "Stores posts within a community. Any authenticated user can create and view posts.",
          "params": [
            {
              "name": "communityId",
              "description": "The unique identifier of the community."
            },
            {
              "name": "postId",
              "description": "The unique identifier of the post."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/posts/{postId}/comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": {
            "$ref": "#/backend/entities/Comment"
          },
          "description": "Stores comments on a post. Any authenticated user can create and view comments.",
          "params": [
            {
              "name": "communityId",
              "description": "The unique identifier of the community."
            },
            {
              "name": "postId",
              "description": "The unique identifier of the post."
            },
            {
              "name": "commentId",
              "description": "The unique identifier of the comment."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/posts/{postId}/votes/{userId}",
        "definition": {
          "entityName": "Vote",
          "schema": {
            "$ref": "#/backend/entities/Vote"
          },
          "description": "Stores user votes for a specific post.",
          "params": [
            { "name": "communityId" }, { "name": "postId" }, { "name": "userId" }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/posts/{postId}/comments/{commentId}/votes/{userId}",
        "definition": {
          "entityName": "Vote",
          "schema": {
            "$ref": "#/backend/entities/Vote"
          },
          "description": "Stores user votes for a specific comment.",
          "params": [
            { "name": "communityId" }, { "name": "postId" }, { "name": "commentId" }, { "name": "userId" }
          ]
        }
      }
    ],
    "reasoning": "The structure allows for nested data. Posts are nested under communities, and comments are nested under posts. Votes are nested under the content they apply to, which allows for easy lookup of a user's vote on a specific item."
  }
}
